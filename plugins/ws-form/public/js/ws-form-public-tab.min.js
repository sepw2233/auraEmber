!function(t){"use strict";t.WS_Form.prototype.form_tab=function(){if(Object.keys(this.form.groups).length<=1)return!1;var e=this,a=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",o=parseInt(this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0,10),i=this.get_query_var("wsf_tab_index_"+this.form.id);""!==i&&(o=parseInt(i,10));var r=t(".wsf-group-tabs",this.form_canvas_obj),s=r.children();if(void 0===s[o]||void 0!==t(s[o]).attr("data-wsf-group-hidden")){o=0;var _=t(":not([data-wsf-group-hidden])",s);_.length&&(o=_.first().index()),e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",o)}"ws-form"===t.WS_Form.settings_plugin.framework?(r.hasClass("wsf-tabs")&&this.tabs_destroy(),this.tabs(r,{active:o})):this.form_tab_group_index_set(o);var n=this.framework.tabs.public;if(void 0!==n.event_js){var f=n.event_js,c=void 0!==n.event_type_js&&n.event_type_js,d=void 0!==n.event_selector_wrapper_js&&n.event_selector_wrapper_js,b=void 0!==n.event_selector_active_js&&n.event_selector_active_js;switch(c){case"wrapper":var l=t(d,this.form_canvas_obj);break;default:l=t("["+a+'^="#'+this.form_id_prefix+'group-"]',this.form_canvas_obj)}l.on(f,function(a,o){switch(c){case"wrapper":var i=t(b,l).index();break;default:i=t(this).parent().index()}e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",i),!1!==e.object_focus&&(e.object_focus.trigger("focus"),e.object_focus=!1),e.form_tab_active_event(i),e.trigger("tab-clicked")})}this.group_index=o},t.WS_Form.prototype.form_tab_active_event=function(t){this.group_index=t,this.form_label(),this.form_canvas_obj.trigger("wsf-group-index")},t.WS_Form.prototype.form_tab_validation=function(){var t=this;this.get_object_meta_value(this.form,"tab_validation")&&(this.form_canvas_obj.on("wsf-validate-silent",function(){t.form_tab_validation_process()}),this.form_tab_validation_process()),this.form_tab_active_event(this.group_index)},t.WS_Form.prototype.form_tab_validation_process=function(){if(this.get_object_meta_value(this.form,"tab_validation")){var e=this,a=!0,o=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",i=t(".wsf-group-tabs > :not([data-wsf-group-hidden]) > ["+o+"]",this.form_canvas_obj),r=i.length,s=0;i.each(function(e){if(t(t(this).attr(o)).is(":visible"))return s=e,!1}),i.each(function(i){if(e.form_tab_validation_previous(t(this),a),i<r-1){if(!0===a)var _=e.object_validate(t(t(this).attr(o)));else _=!1;e.form_tab_validation_current(t(this),_),a=_}!_&&s>i&&e.form_tab_group_index_set(i)}),this.form_navigation()}},t.WS_Form.prototype.form_tab_validation_current=function(e,a){var o=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",i=e.attr(o),r=t(i,this.form_canvas_obj),s=t('button[data-action="wsf-tab_next"]',r),_=this.get_object_meta_value(this.form,"tab_validation_show");a?_?r.attr("data-wsf-validated",""):s.prop("disabled",!1):_?r.removeAttr("data-wsf-validated"):s.prop("disabled",!0)},t.WS_Form.prototype.form_tab_validation_previous=function(t,e){var a=this.framework.tabs.public;void 0!==a.class_disabled&&(e?t.removeClass(a.class_disabled).removeAttr("data-wsf-tab-disabled").removeAttr("tabindex"):t.addClass(a.class_disabled).attr("data-wsf-tab-disabled","").attr("tabindex","-1")),void 0!==a.class_parent_disabled&&(e?t.parent().removeClass(a.class_parent_disabled):t.parent().addClass(a.class_parent_disabled))},t.WS_Form.prototype.form_tab_group_index_new=function(e,a){this.form_tab_group_index_set(a);var o=e.closest("[data-id]").attr("data-id"),i=this.field_data_cache[o],r=this.get_object_meta_value(i,"scroll_to_top",""),s=this.get_object_meta_value(i,"scroll_to_top_offset","0");s=""==s?0:parseInt(s,10);var _=this.form_canvas_obj.offset().top-s;switch(r){case"instant":t("html,body").scrollTop(_);break;case"smooth":var n=this.get_object_meta_value(i,"scroll_to_top_duration","0");n=""==n?0:parseInt(n,10),t("html,body").animate({scrollTop:_},n)}},t.WS_Form.prototype.form_tab_group_index_set=function(e){if(Object.keys(this.form.groups).length<=1)return!1;var a=this.framework.tabs.public;if(void 0!==a.activate_js){var o=a.activate_js;if(""!=o){var i={form:"#"+this.form_obj_id,index:e},r=this.mask_parse(o,i);t.globalEval("(function($) { $(function() {"+r+"}); })(jQuery);"),this.cookie_set("tab_index",e)}}this.form_tab_active_event(e)}}(jQuery);